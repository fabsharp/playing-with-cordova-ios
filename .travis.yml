language: objective-c
osx_image: xcode9.4
sudo: false

env:
  - TRAVIS_NODE_VERSION: 12

before_install:
  - nvm install $TRAVIS_NODE_VERSION

install:
  - npm install -g cordova@latest
  - npm install

before_script:
  - cordova platform add ios
script:
  - node --version
  - npm --version
  - cordova build ios

deploy:
  - provider: pages
    skip_cleanup: true
    github_token: $GITHUB_TOKEN
    keep_history: true
    on:
      branch: master
    local_dir: platforms/browser/www
      - provider: releases
        file: platforms/ios/build/emulator/HelloCordova.app
        api_key:
          secure: $GITHUB_TOKEN
        skip_cleanup: true
        draft: true
